{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import MovieSlider from'../components/MovieSlider';import{useTranslation}from'react-i18next';import{fetchMovies,searchMovies}from'../services/movieService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=()=>{const[movies,setMovies]=useState([]);const[searchResults,setSearchResults]=useState([]);const[searchText,setSearchText]=useState('');const{t}=useTranslation();const navigate=useNavigate();useEffect(()=>{const loadMovies=async()=>{const initialMovies=await fetchMovies();setMovies(initialMovies);};loadMovies();},[]);const handleSearch=async e=>{const query=e.target.value;setSearchText(query);if(query.length>=3){const results=await searchMovies(query);setSearchResults(results);}else{setSearchResults([]);}};const handleSearchSubmit=e=>{if(e.key==='Enter'){e.preventDefault();navigate(\"/search?query=\".concat(searchText));}};const handleResultClick=imdbID=>{navigate(\"/movie/\".concat(imdbID));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t('home')}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:searchText,onChange:handleSearch,onKeyDown:handleSearchSubmit// Handle Enter key press\n,placeholder:t('search')}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu show\",children:searchResults.map(result=>/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item d-flex align-items-center\",onClick:()=>handleResultClick(result.imdbID),children:[/*#__PURE__*/_jsx(\"img\",{src:result.Poster,alt:result.Title,style:{width:'50px',height:'75px',marginRight:'10px'}}),/*#__PURE__*/_jsxs(\"span\",{children:[result.Title,\" - \",result.Year]})]},result.imdbID))})]}),/*#__PURE__*/_jsx(\"h2\",{children:t('topMovies')}),movies.length>0?/*#__PURE__*/_jsx(MovieSlider,{movies:movies}):/*#__PURE__*/_jsx(\"p\",{children:t('noMovies')})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","MovieSlider","useTranslation","fetchMovies","searchMovies","jsx","_jsx","jsxs","_jsxs","HomePage","movies","setMovies","searchResults","setSearchResults","searchText","setSearchText","t","navigate","loadMovies","initialMovies","handleSearch","e","query","target","value","length","results","handleSearchSubmit","key","preventDefault","concat","handleResultClick","imdbID","className","children","type","onChange","onKeyDown","placeholder","map","result","onClick","src","Poster","alt","Title","style","width","height","marginRight","Year"],"sources":["C:/Users/Serhan/Desktop/berkayodev3/frontend/src/pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MovieSlider from '../components/MovieSlider';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { fetchMovies, searchMovies } from '../services/movieService';\r\n\r\nconst HomePage = () => {\r\n  const [movies, setMovies] = useState([]);\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [searchText, setSearchText] = useState('');\r\n  const { t } = useTranslation();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const loadMovies = async () => {\r\n      const initialMovies = await fetchMovies();\r\n      setMovies(initialMovies);\r\n    };\r\n    loadMovies();\r\n  }, []);\r\n\r\n  const handleSearch = async (e) => {\r\n    const query = e.target.value;\r\n    setSearchText(query);\r\n    if (query.length >= 3) {\r\n      const results = await searchMovies(query);\r\n      setSearchResults(results);\r\n    } else {\r\n      setSearchResults([]);\r\n    }\r\n  };\r\n\r\n  const handleSearchSubmit = (e) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      navigate(`/search?query=${searchText}`);\r\n    }\r\n  };\r\n\r\n  const handleResultClick = (imdbID) => {\r\n    navigate(`/movie/${imdbID}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-4\">\r\n      <h1>{t('home')}</h1>\r\n      <div className=\"form-group\">\r\n        <input \r\n          type=\"text\" \r\n          className=\"form-control\" \r\n          value={searchText} \r\n          onChange={handleSearch} \r\n          onKeyDown={handleSearchSubmit} // Handle Enter key press\r\n          placeholder={t('search')} \r\n        />\r\n        {searchResults.length > 0 && (\r\n          <div className=\"dropdown-menu show\">\r\n            {searchResults.map((result) => (\r\n              <div \r\n                className=\"dropdown-item d-flex align-items-center\" \r\n                key={result.imdbID} \r\n                onClick={() => handleResultClick(result.imdbID)}\r\n              >\r\n                <img \r\n                  src={result.Poster} \r\n                  alt={result.Title} \r\n                  style={{ width: '50px', height: '75px', marginRight: '10px' }}\r\n                />\r\n                <span>{result.Title} - {result.Year}</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <h2>{t('topMovies')}</h2>\r\n      {movies.length > 0 ? (\r\n        \r\n        <MovieSlider movies={movies} />\r\n        \r\n      ) : (\r\n        <p>{t('noMovies')}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}